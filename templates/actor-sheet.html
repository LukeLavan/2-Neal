<form class="{{cssClass}}" autocomplete="off">
    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item navbar-item" data-tab="basic">BASIC</a>
        <a class="item navbar-item" data-tab="combat">COMBAT</a>
    </nav>
    <section class="sheet-body">
        <div class="tab basic" data-group="primary" data-tab="basic">
            <div class="basic-top">
                <table>
                    <tr>
                        <td>Player:</td>
                        <td>
                            <input
                                name="data.playerName"
                                type="text"
                                value="{{data.data.playerName}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Name:</td>
                        <td>
                            <input
                                name="name"
                                type="text"
                                value="{{data.name}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Languages:</td>
                        <td>
                            <input
                                name="data.languages"
                                type="text"
                                value="{{data.data.languages}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Alignment:</td>
                        <td>
                            <select name="data.alignment" style="width: 100%">
                                {{selectOptions alignmentChoices selected=data.data.alignment}}
                            </select>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Race:</td>
                        <td>
                            <input
                                name="data.race"
                                type="text"
                                value="{{data.data.race}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Classes:</td>
                        <td>
                            <input
                                name="data.classes"
                                type="text"
                                value="{{data.data.classes}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>XP:</td>
                        <td>
                            <input
                                name="data.xp"
                                type="text"
                                value="{{data.data.xp}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Levels:</td>
                        <td>
                            <input
                                name="data.levels"
                                type="text"
                                value="{{data.data.levels}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Body Weight:</td>
                        <td>
                            <input
                                name="data.bodyWeight"
                                type="number"
                                value="{{data.data.bodyWeight}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Height:</td>
                        <td>
                            <input
                                name="data.height"
                                type="text"
                                value="{{data.data.height}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Sex:</td>
                        <td>
                            <input
                                name="data.sex"
                                type="text"
                                value="{{data.data.sex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Gender:</td>
                        <td>
                            <input
                                name="data.gender"
                                type="text"
                                value="{{data.data.gender}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Size:</td>
                        <td>
                            <input
                                name="data.size"
                                type="text"
                                value="{{data.data.size}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Speed:</td>
                        <td>
                            <input
                                name="data.speed"
                                type="number"
                                value="{{data.data.speed}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Age:</td>
                        <td>
                            <input
                                name="data.age"
                                type="text"
                                value="{{data.data.age}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Handed:</td>
                        <td>
                            <input
                                name="data.handed"
                                type="text"
                                value="{{data.data.handed}}"
                            />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="basic-mid">
                <table>
                    <tr>
                        <td>STR</td>
                        <td>
                            <input
                                name="data.str"
                                type="number"
                                value="{{data.data.str}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>DEX</td>
                        <td>
                            <input
                                name="data.dex"
                                type="number"
                                value="{{data.data.dex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CON</td>
                        <td>
                            <input
                                name="data.con"
                                type="number"
                                value="{{data.data.con}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>INT</td>
                        <td>
                            <input
                                name="data.int"
                                type="number"
                                value="{{data.data.int}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>WIS</td>
                        <td>
                            <input
                                name="data.wis"
                                type="number"
                                value="{{data.data.wis}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CHA</td>
                        <td>
                            <input
                                name="data.cha"
                                type="number"
                                value="{{data.data.cha}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>PER</td>
                        <td>
                            <input
                                name="data.per"
                                type="number"
                                value="{{data.data.per}}"
                            />
                        </td>
                    </tr>
                </table>
                <div>
                    <div class="derived-row" id="derived-str">
                        <div>
                            <span class="derived-label">
                                Melee Attack Adjust
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.meleeAttackAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Melee Damage Adjust
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.meleeDamageAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Weight Allowance
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.weightAllowance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Press
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.maxPress}}
                            </span>
                        </div>
                        <div 
                            class="rollable"
                            data-roll="d20cs<={{data.data.openDoors}}"
                            data-label="Open Doors Check"
                        >
                            <span class="derived-label">
                                Open Doors
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.openDoors}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.bendBars}}"
                            data-label="Bend Bars Check"
                        >
                            <span class="derived-label">
                                Bend Bars
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.bendBars}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-dex">
                        <div>
                            <span class="derived-label">
                                Missile Hit Adjustment
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.missileHitAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Defensive Adjustment
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.defenseAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-con">
                        <div>
                            <span class="derived-label">
                                HP Adjust
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.hitPointAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                System Shock
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.systemShock}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Poison Save
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.poisonSave}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Regen
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.regen}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-int">
                        <div>
                            <span class="derived-label">
                                Languages
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.numLanguages}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spell Level
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.maxSpellLevel}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.spellLearnChance}}"
                            data-label="Chance to Learn Spell"
                        >
                            <span class="derived-label">
                                Chance to Learn Spell
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.spellLearnChance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spells per Level
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.maxSpellPerLevel}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-wis">
                        <div>
                            <span class="derived-label">
                                Magical Defense Adjust
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.magicDefenseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Bonus Spells
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.bonusSpells}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.chanceSpellFailure}}"
                            data-label="Spell Failure"
                        >
                            <span class="derived-label">
                                Spell Failure
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.chanceSpellFailure}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-cha">
                        <div>
                            <span class="derived-label">
                                Henchmen
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.maxHenchmen}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Loyalty Base
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.loyaltyBase}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="2d10+{{data.data.reactionAdjust}}"
                            data-label="Encounter Reaction"
                        >
                            <span class="derived-label">
                                Reaction Adjustment
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.reactionAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="derived-row" id="derived-per">
                        <div
                            class="rollable"
                            data-roll="d10cs>(3-{{data.data.surpriseAdjust}})"
                            data-label="Surprise Check"
                        >
                            <span class="derived-label">
                                Surprise Adjustment
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.surpriseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Illusion Immunity
                            </span>
                            <br />
                            <span class="derived-value">
                                {{data.data.illusionImmunity}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab combat" data-group="primary" data-tab="combat">
            <div class="combat-top">
                <div class="combat-top-hp">
                    <span class="rollable">Hit Points</span>
                    <hr />
                    <div>
                        <div>
                            <input
                                name="data.health.value"
                                type="number"
                                value="{{data.data.health.value}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Current</span>
                        </div>
                        <div>
                            <input
                                name="data.health.max"
                                id="pogfish"
                                type="number"
                                value="{{data.data.health.max}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Maximum</span>
                        </div>
                        <div>
                            <select class="combat-big-text combat-top-select" name="data.hitDieRoll">
                                {{selectOptions hitDieChoices selected=data.data.hitDieRoll}}
                            </select>
                            <br />
                            <span>Hit Dice</span>
                        </div>
                    </div>
                    <!--
                    <div 
                        class="combat-top-hp-button rollable"
                        data-roll="{{data.data.hitDieRollAdjusted}}"
                        data-label="Hit Die"
                    ></div>
                    -->
                </div>
                <div class="combat-top-ac">
                    <span>Armor Class</span>
                    <hr />
                    <div>
                        <div>
                            <span class="combat-big-text">21</span>
                            <br />
                            <span>Total</span>
                        </div>
                        <div>
                            <span class="combat-big-text">19</span>
                            <br />
                            <span>Back</span>
                        </div>
                        <div>
                            <span class="combat-big-text">21</span>
                            <br />
                            <span>Touch</span>
                        </div>
                        <div>
                            <span class="combat-big-text">19</span>
                            <br />
                            <span>Surprise</span>
                        </div>
                    </div>
                </div>
                <div class="combat-top-attacks">
                    <span>Basic Attacks</span>
                    <hr/>
                    <div>
                        <div class="rollable">
                            <span class="combat-big-text">7</span>
                            <br />
                            <span>Melee</span>
                        </div>
                        <div class="rollable">
                            <span class="combat-big-text">9</span>
                            <br />
                            <span>Missile</span>
                        </div>
                        <div class="rollable">
                            <span class="combat-big-text">7</span>
                            <br />
                            <span>Thrown</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="combat-mid">
                <table class="combat-mid-throws">
                    <tr>
                        <th colspan="2">Saving Throws</th>
                    </tr>
                    <tr>
                        <td>
                            Paralyzation, Poison, Death
                        </td>
                        <!-- TODO: Constitution modifier for posion -->
                        <td
                            class="rollable combat-big-text combat-mid-throws-value"
                            data-roll="d20cs>={{data.data.savingThrows.ppd}}"
                            data-label="Saving Throw against Paralyzation/Poison/Death"
                        >
                            {{data.data.savingThrows.ppd}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Rods, Staves, Wands
                        </td>
                        <td
                            class="rollable combat-big-text combat-mid-throws-value"
                            data-roll="d20cs>={{data.data.savingThrows.rsw}}"
                            data-label="Saving Throw against Rods/Staves/Wands"
                        >
                            {{data.data.savingThrows.rsw}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Petrification, Polymorph
                        </td>
                        <td
                            class="rollable combat-big-text combat-mid-throws-value"
                            data-roll="d20cs>={{data.data.savingThrows.pepo}}"
                            data-label="Saving Throw against Petrification/Polymorph"
                        >
                            {{data.data.savingThrows.pepo}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Breath Weapon
                        </td>
                        <td
                            class="rollable combat-big-text combat-mid-throws-value"
                            data-roll="d20cs>={{data.data.savingThrows.brw}}"
                            data-label="Saving Throw against Breath Weapon"
                        >
                            {{data.data.savingThrows.brw}}
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Spell
                        </td>
                        <!-- TODO: Wisdom modifier for "mind"-affecting spells -->
                        <td
                            class="rollable combat-big-text combat-mid-throws-value"
                            data-roll="d20cs>={{data.data.savingThrows.spell}}"
                            data-label="Saving Throw against Spell"
                        >
                            {{data.data.savingThrows.spell}}
                        </td>
                    </tr>
                </table>
                <div class="combat-mid-throwMods">
                    <table class="combat-mid-throwMods-table">
                        <colgroup>
                            <col>
                            <col>
                            <col>
                            <col>
                            <col>
                            <col>
                            <col>
                            <col>
                        </colgroup>
                        <tr>
                            <th colspan="15">Saving Throw Modifiers</th>
                        </tr>
                        <tr>
                            <th>Source</th>
                            <th>P/P/D</th>
                            <th>R/S/W</th>
                            <th>Pe/Po</th>
                            <th>Br. W</th>
                            <th>Spell</th>
                            <th>All</th>
                            <th>Active?</th>
                        </tr>
                        {{#each actor.data.items}}
                        {{#if (eq this.type "throwMod")}}
                        <tr class="item" data-item-id="{{this.id}}">
                            <td>
                                <input
                                    type="text"
                                    class="combat-mid-throwMods-table-inputText item-edit"
                                    id="{{this.id}}.source"
                                    name="{{this.id}}.source"
                                    value="{{this.data.data.source}}"
                                    data-target="data.source"
                                    data-name=true
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.ppd"
                                    value="{{this.data.data.ppd}}"
                                    data-target="data.ppd"
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.rsw"
                                    value="{{this.data.data.rsw}}"
                                    data-target="data.rsw"
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.pepo"
                                    value="{{this.data.data.pepo}}"
                                    data-target="data.pepo"
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.brw"
                                    value="{{this.data.data.brw}}"
                                    data-target="data.brw"
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.spell"
                                    value="{{this.data.data.spell}}"
                                    data-target="data.spell"
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="combat-mid-throwMods-table-inputNum item-edit"
                                    name="{{this.id}}.all"
                                    value="{{this.data.data.all}}"
                                    data-target="data.all"
                                >
                            </td>
                            <td>
                                <input
                                    type="checkbox"
                                    class="item-edit"
                                    name="{{this.id}}.active"
                                    data-target="data.active"
                                    {{checked this.data.data.active}}
                                >
                            </td>
                        </tr>
                        {{/if}}
                        {{/each}}
                    </table>
                    <div class="combat-mid-throwMods-table-buttons">
                        <a class="item-create" data-type="throwMod"><i class="fas fa-plus"></i> Add modifier</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</form>
