<form class="{{cssClass}}" autocomplete="off">
    <nav class="primary-tabs tabs" data-group="primary">
        {{#if this.data.data.settings.sheetToggle.basic}}
        <a class="item navbar-item" data-tab="basic" data-group="primary">BASIC</a>
        {{/if}}
        {{#if this.data.data.settings.sheetToggle.combat}}
        <a class="item navbar-item" data-tab="combat" data-group="primary">COMBAT</a>
        {{/if}}
        {{#if this.data.data.settings.sheetToggle.gear}}
        <a class="item navbar-item" data-tab="gear" data-group="primary">GEAR</a>
        {{/if}}
        {{#if this.data.data.settings.sheetToggle.skills}}
        <a class="item navbar-item" data-tab="skills" data-group="primary">SKILLS</a>
        {{/if}}
        {{#if this.data.data.settings.sheetToggle.spells}}
        <a class="item navbar-item" data-tab="spells" data-group="primary">SPELLS</a>
        {{/if}}
        <a class="item navbar-item" data-tab="settings" data-group="primary">SETTINGS</a>
    </nav>
    <section class="primary-content">
        <div class="tab basic" data-group="primary" data-tab="basic">
            <div class="basic-top">
                <table>
                    <tr>
                        <td>Player:</td>
                        <td>
                            <input
                                name="data.playerName"
                                type="text"
                                value="{{data.data.playerName}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Name:</td>
                        <td>
                            <input
                                name="name"
                                type="text"
                                value="{{data.name}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Languages:</td>
                        <td>
                            <input
                                name="data.languages"
                                type="text"
                                value="{{data.data.languages}}"
                                title="{{data.data.languages}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Alignment:</td>
                        <td>
                            <select name="data.alignment" class="basic-top-alignment">
                                {{selectOptions alignmentChoices selected=data.data.alignment}}
                            </select>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Race:</td>
                        <td>
                            <input
                                name="data.race"
                                type="text"
                                value="{{data.data.race}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Classes:</td>
                        <td>
                            <input
                                name="data.classes"
                                type="text"
                                value="{{data.data.classes}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>XP:</td>
                        <td>
                            <input
                                name="data.xp"
                                type="text"
                                value="{{data.data.xp}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Levels:</td>
                        <td>
                            <input
                                name="data.levels"
                                type="text"
                                value="{{data.data.levels}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Body Weight:</td>
                        <td>
                            <input
                                name="data.bodyWeight"
                                type="number"
                                value="{{data.data.bodyWeight}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Height:</td>
                        <td>
                            <input
                                name="data.height"
                                type="text"
                                value="{{data.data.height}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Sex:</td>
                        <td>
                            <input
                                name="data.sex"
                                type="text"
                                value="{{data.data.sex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Gender:</td>
                        <td>
                            <input
                                name="data.gender"
                                type="text"
                                value="{{data.data.gender}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Size:</td>
                        <td colspan="3">
                            <input
                                name="data.size"
                                type="text"
                                value="{{data.data.size}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Speed:
                        </td>
                        <td>
                            <input
                                type="number"
                                name="data.speed"
                                value="{{data.data.speed}}"
                            />
                        </td>
                        <td>Mod:</td>
                        <td>
                            <span class="basic-top-speedMod"><b>{{data.data.speedMod}}</b></span>
                        </td>
                    </tr>
                    <tr>
                        <td>Age:</td>
                        <td colspan="3">
                            <input
                                name="data.age"
                                type="text"
                                value="{{data.data.age}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Handed:</td>
                        <td colspan="3">
                            <input
                                name="data.handed"
                                type="text"
                                value="{{data.data.handed}}"
                            />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="basic-mid">
                <table class="basic-mid-stats">
                    <tr>
                        <td>STR</td>
                        <td>
                            <input
                                name="data.str"
                                type="number"
                                value="{{data.data.str}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>DEX</td>
                        <td>
                            <input
                                name="data.dex"
                                type="number"
                                value="{{data.data.dex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CON</td>
                        <td>
                            <input
                                name="data.con"
                                type="number"
                                value="{{data.data.con}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>INT</td>
                        <td>
                            <input
                                name="data.int"
                                type="number"
                                value="{{data.data.int}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>WIS</td>
                        <td>
                            <input
                                name="data.wis"
                                type="number"
                                value="{{data.data.wis}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CHA</td>
                        <td>
                            <input
                                name="data.cha"
                                type="number"
                                value="{{data.data.cha}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>PER</td>
                        <td>
                            <input
                                name="data.per"
                                type="number"
                                value="{{data.data.per}}"
                            />
                        </td>
                    </tr>
                </table>
                <div>
                    <div class="basic-derivedRow basic-derivedRow-altColor">
                        <div>
                            <span class="derived-label">
                                Melee Attack Adjust
                            </span>
                            <span class="derived-value">
                                {{data.data.meleeAttackAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Melee Damage Adjust
                            </span>
                            <span class="derived-value">
                                {{data.data.meleeDamageAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Weight Allowance
                            </span>
                            <span class="derived-value">
                                {{data.data.weightAllowance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Press
                            </span>
                            <span class="derived-value">
                                {{data.data.maxPress}}
                            </span>
                        </div>
                        <div 
                            class="rollable"
                            data-roll="d20cs<={{data.data.openDoors}}"
                            data-label="Open Doors Check"
                        >
                            <span class="derived-label">
                                Open Doors
                            </span>
                            <span class="derived-value">
                                {{data.data.openDoors}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.bendBars}}"
                            data-label="Bend Bars Check"
                        >
                            <span class="derived-label">
                                Bend Bars
                            </span>
                            <span class="derived-value">
                                {{data.data.bendBars}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-dex">
                        <div>
                            <span class="derived-label">
                                Missile Hit Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.data.missileHitAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Defensive Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.data.defenseAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-con">
                        <div>
                            <span class="derived-label">
                                HP Adjust
                            </span>
                            <span class="derived-value">
                                {{data.data.hitPointAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                System Shock
                            </span>
                            <span class="derived-value">
                                {{data.data.systemShock}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Poison Save
                            </span>
                            <span class="derived-value">
                                {{data.data.poisonSave}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Regen
                            </span>
                            <span class="derived-value">
                                {{data.data.regen}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-int">
                        <div>
                            <span class="derived-label">
                                Languages
                            </span>
                            <span class="derived-value">
                                {{data.data.numLanguages}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spell Level
                            </span>
                            <span class="derived-value">
                                {{data.data.maxSpellLevel}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.spellLearnChance}}"
                            data-label="Chance to Learn Spell"
                        >
                            <span class="derived-label">
                                Chance to Learn Spell
                            </span>
                            <span class="derived-value">
                                {{data.data.spellLearnChance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spells per Level
                            </span>
                            <span class="derived-value">
                                {{data.data.maxSpellPerLevel}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-wis">
                        <div>
                            <span class="derived-label">
                                Magical Defense Adjust
                            </span>
                            <span class="derived-value">
                                {{data.data.magicDefenseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Bonus Spells
                            </span>
                            <span class="derived-value">
                                {{data.data.bonusSpells}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.data.chanceSpellFailure}}"
                            data-label="Spell Failure"
                        >
                            <span class="derived-label">
                                Spell Failure
                            </span>
                            <span class="derived-value">
                                {{data.data.chanceSpellFailure}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-cha">
                        <div>
                            <span class="derived-label">
                                Henchmen
                            </span>
                            <span class="derived-value">
                                {{data.data.maxHenchmen}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Loyalty Base
                            </span>
                            <span class="derived-value">
                                {{data.data.loyaltyBase}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="2d10+{{data.data.reactionAdjust}}"
                            data-label="Encounter Reaction"
                        >
                            <span class="derived-label">
                                Reaction Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.data.reactionAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-per">
                        <div
                            class="rollable"
                            data-roll="d10cs>(3-{{data.data.surpriseAdjust}})"
                            data-label="Surprise Check"
                        >
                            <span class="derived-label">
                                Surprise Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.data.surpriseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Illusion Immunity
                            </span>
                            <span class="derived-value">
                                {{data.data.illusionImmunity}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab combat" data-group="primary" data-tab="combat">
            <div class="combat-top">
                <div class="combat-top-hp">
                    <span
                        class="rollable"
                        data-roll="{{data.data.hitDieRoll}}+{{data.data.hitPointAdjust}}"
                        data-label="Hit Die"
                    >Hit Points</span>
                    <hr />
                    <div>
                        <div>
                            <input
                                name="data.health.value"
                                type="number"
                                value="{{data.data.health.value}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Current</span>
                        </div>
                        <div>
                            <input
                                name="data.health.max"
                                type="number"
                                value="{{data.data.health.max}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Maximum</span>
                        </div>
                        <div>
                            <select class="combat-big-text combat-top-select" name="data.hitDieRoll">
                                {{selectOptions hitDieChoices selected=data.data.hitDieRoll}}
                            </select>
                            <br />
                            <span>Hit Dice</span>
                        </div>
                    </div>
                    <!--
                    <div 
                        class="combat-top-hp-button rollable"
                        data-roll="{{data.data.hitDieRollAdjusted}}"
                        data-label="Hit Die"
                    ></div>
                    -->
                </div>
                <div class="combat-top-ac">
                    <span>Armor Class</span>
                    <hr />
                    <div>
                        <div>
                            <span class="combat-big-text">{{data.data.armorClasses.total}}</span>
                            <span>Total</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.data.armorClasses.back}}</span>
                            <span>Back</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.data.armorClasses.touch}}</span>
                            <span>Touch</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.data.armorClasses.surprise}}</span>
                            <span>Surprise</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="combat-weapons">
                <table class="itemTable">
                    <tr>
                        <th colspan="12">Weapons</th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th># Atks</th>
                        <th>To Hit</th>
                        <th>Dmg Die</th>
                        <th>To Dmg</th>
                        <th>Range</th>
                        <th>Atk Type</th>
                        <th>Dmg Type</th>
                        <th>Speed</th>
                        <th></th>
                        <!--th>Init</th-->
                        <th>Atk</th>
                        <th>Dmg</th>
                    </tr>
                    {{#each actor.data.items}}
                    {{#if (eq this.type "weapon")}}
                    <tr class="item" data-item-id="{{this.id}}">
                        <td>
                            <input
                                type="text"
                                class="itemTable-inputText item-edit"
                                id="{{this.id}}.name"
                                name="{{this.id}}.name"
                                value="{{this.name}}"
                                data-target="name"
                                data-name=true
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.numAttacks"
                                name="{{this.id}}.numAttacks"
                                value="{{this.data.data.numAttacks}}"
                                data-target="data.numAttacks"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.toHit"
                                name="{{this.id}}.toHit"
                                value="{{this.data.data.toHit}}"
                                data-target="data.toHit"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td class="weapon-damage">
                            <input
                                type="text"
                                class="itemTable-inputText item-edit"
                                id="{{this.id}}.damageDie"
                                name="{{this.id}}.damageDie"
                                value="{{this.data.data.damageDie}}"
                                data-target="data.damageDie"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            />
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.toDamage"
                                name="{{this.id}}.toDamage"
                                value="{{this.data.data.toDamage}}"
                                data-target="data.toDamage"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td class="weapon-range">
                            <input
                                type="text"
                                class="itemTable-inputText item-edit"
                                id="{{this.id}}.range"
                                name="{{this.id}}.range"
                                value="{{this.data.data.range}}"
                                data-target="data.range"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <select
                                class="item-edit"
                                data-target="data.attackType"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                                {{selectOptions @root.attackTypeChoices selected=this.data.data.attackType}}
                            </select>
                        </td>
                        <td>
                            <select
                                class="item-edit"
                                data-target="data.damageType"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                                {{selectOptions @root.damageTypeChoices selected=this.data.data.damageType}}
                            </select>
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.speed"
                                name="{{this.id}}.speed"
                                value="{{this.data.data.speed}}"
                                data-target="data.speed"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <a
                                class="item-delete"
                                title="Delete Item"
                                data-locked={{this.data.data.locked}}
                            >
                                <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                            </a>
                            <a
                                class="item-toggle"
                                title="Lock Item"
                                data-value={{this.data.data.locked}}
                                data-target="data.locked"
                            >
                                <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                            </a>
                        </td>
                        <!--td class="weapon-roll-td">
                            <a class="rollable weapon-roll"></a>
                            TODO: initiative roll
                        </td-->
                        <td class="weapon-roll-td">
                            <a
                                class="rollable weapon-roll"
                                data-roll="
                                    1d20
                                    +{{this.data.data.toHit}}
                                    {{#if (eq this.data.data.attackType 'Melee')}}
                                        +{{this.actor.data.data.hitAdjust.melee}}
                                    {{/if}}
                                    {{#if (eq this.data.data.attackType 'Missile')}}
                                        +{{this.actor.data.data.hitAdjust.missile}}
                                    {{/if}}
                                    {{#if (eq this.data.data.attackType 'Thrown')}}
                                        +{{this.actor.data.data.hitAdjust.thrown}}
                                    {{/if}}
                                "
                                data-label="to hit with {{this.name}}"
                            ></a>
                        </td>
                        <td class="weapon-roll-td">
                            <a
                                class="rollable weapon-roll"
                                data-roll="{{this.data.data.damageDie}}+{{this.data.data.toDamage}}"
                                data-label="damage with {{this.name}}"
                            ></a>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="weapon"><i class="fas fa-plus"></i> Add weapon</a>
                </div>
            </div>
            <div class="combat-modTables">
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">
                                Hit Adjust
                            </th>
                        </tr>
                        <tr>
                            <td>Melee</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.data.hitAdjust.melee}}"
                                data-label="Basic Melee Attack"
                            >
                                {{#if (gte data.data.hitAdjust.melee 0)}}+{{/if}}{{data.data.hitAdjust.melee}}
                            </td>
                        </tr>
                        <tr>
                            <td>Missile</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.data.hitAdjust.missile}}"
                                data-label="Basic Missile Attack"
                            >
                                {{#if (gte data.data.hitAdjust.missile 0)}}+{{/if}}{{data.data.hitAdjust.missile}}
                            </td>
                        </tr>
                        <tr>
                            <td>Thrown</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.data.hitAdjust.thrown}}"
                                data-label="Basic Thrown Attack"
                            >
                                {{#if (gte data.data.hitAdjust.thrown 0)}}+{{/if}}{{data.data.hitAdjust.thrown}}
                            </td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <colgroup>
                                <col>
                                <col>
                                <col>
                            </colgroup>
                            <tr>
                                <th colspan="7">To-Hit Modifiers</th>
                            </tr>
                            <tr>
                                <th>Source</th>
                                <th>Melee</th>
                                <th>Missile</th>
                                <th>Thrown</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            {{#each actor.data.items}}
                            {{#if (eq this.type "hitMod")}}
                            <tr class="item" data-item-id="{{this.id}}">
                                <td>
                                    <input
                                        type="text"
                                        class="itemTable-inputText item-edit"
                                        id="{{this.id}}.name"
                                        name="{{this.id}}.name"
                                        value="{{this.name}}"
                                        data-target="name"
                                        data-name=true
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.melee"
                                        name="{{this.id}}.melee"
                                        value="{{this.data.data.melee}}"
                                        data-target="data.melee"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.missile"
                                        name="{{this.id}}.missile"
                                        value="{{this.data.data.missile}}"
                                        data-target="data.missile"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.thrown"
                                        name="{{this.id}}.thrown"
                                        value="{{this.data.data.thrown}}"
                                        data-target="data.thrown"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <a
                                        class="item-delete"
                                        title="Delete Item"
                                        data-locked={{this.data.data.locked}}
                                    >
                                        <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <a
                                        class="item-toggle"
                                        title="Lock Item"
                                        data-value={{this.data.data.locked}}
                                        data-target="data.locked"
                                    >
                                        <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <input
                                        type="checkbox"
                                        class="item-edit"
                                        name="{{this.id}}.active"
                                        data-target="data.active"
                                        {{checked this.data.data.active}}
                                    >
                                </td>
                            </tr>
                            {{/if}}
                            {{/each}}
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="hitMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">
                                Armor Classes
                            </th>
                        </tr>
                        <tr>
                            <td>Natural</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.natural}}</td>
                        </tr>
                        <tr>
                            <td>Dexterity</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.dexterity}}</td>
                        </tr>
                        <tr>
                            <td>Armor</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.armor}}</td>
                        </tr>
                        <tr>
                            <td>Shield</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.shield}}</td>
                        </tr>
                        <tr>
                            <td>Magic</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.magic}}</td>
                        </tr>
                        <tr>
                            <td>Encumbrance</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.data.armorClasses.encumbrance}}</td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <colgroup>
                                <col>
                                <col>
                                <col>
                            </colgroup>
                            <tr>
                                <th colspan="9">AC Modifiers</th>
                            </tr>
                            <tr>
                                <th>Source</th>
                                <th>Natural</th>
                                <th>Dexterity</th>
                                <th>Armor</th>
                                <th>Shield</th>
                                <th>Magic</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            {{#each actor.data.items}}
                            {{#if (eq this.type "acMod")}}
                            <tr class="item" data-item-id="{{this.id}}">
                                <td>
                                    <input
                                        type="text"
                                        class="itemTable-inputText item-edit"
                                        id="{{this.id}}.name"
                                        name="{{this.id}}.name"
                                        value="{{this.name}}"
                                        data-target="name"
                                        data-name=true
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.natural"
                                        name="{{this.id}}.natural"
                                        value="{{this.data.data.natural}}"
                                        data-target="data.natural"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.dexterity"
                                        name="{{this.id}}.dexterity"
                                        value="{{this.data.data.dexterity}}"
                                        data-target="data.dexterity"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.armor"
                                        name="{{this.id}}.armor"
                                        value="{{this.data.data.armor}}"
                                        data-target="data.armor"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.shield"
                                        name="{{this.id}}.shield"
                                        value="{{this.data.data.shield}}"
                                        data-target="data.shield"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                >
                            </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        id="{{this.id}}.magic"
                                        name="{{this.id}}.magic"
                                        value="{{this.data.data.magic}}"
                                        data-target="data.magic"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <a
                                        class="item-delete"
                                        title="Delete Item"
                                        data-locked={{this.data.data.locked}}
                                    >
                                        <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <a
                                        class="item-toggle"
                                        title="Lock Item"
                                        data-value={{this.data.data.locked}}
                                        data-target="data.locked"
                                    >
                                        <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <input
                                        type="checkbox"
                                        class="item-edit"
                                        name="{{this.id}}.active"
                                        data-target="data.active"
                                        {{checked this.data.data.active}}
                                    >
                                </td>
                            </tr>
                            {{/if}}
                            {{/each}}
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="acMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">Saving Throws</th>
                        </tr>
                        <tr>
                            <td>
                                Paralyzation, Poison, Death
                            </td>
                            <!-- TODO: Constitution modifier for posion -->
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.data.savingThrows.ppd}}"
                                data-label="Saving Throw against Paralyzation/Poison/Death"
                            >
                                {{data.data.savingThrows.ppd}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rods, Staves, Wands
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.data.savingThrows.rsw}}"
                                data-label="Saving Throw against Rods/Staves/Wands"
                            >
                                {{data.data.savingThrows.rsw}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Petrification, Polymorph
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.data.savingThrows.pepo}}"
                                data-label="Saving Throw against Petrification/Polymorph"
                            >
                                {{data.data.savingThrows.pepo}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Breath Weapon
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.data.savingThrows.brw}}"
                                data-label="Saving Throw against Breath Weapon"
                            >
                                {{data.data.savingThrows.brw}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Spell
                            </td>
                            <!-- TODO: Wisdom modifier for "mind"-affecting spells -->
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.data.savingThrows.spell}}"
                                data-label="Saving Throw against Spell"
                            >
                                {{data.data.savingThrows.spell}}
                            </td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <colgroup>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                                <col>
                            </colgroup>
                            <tr>
                                <th colspan="15">Saving Throw Modifiers</th>
                            </tr>
                            <tr>
                                <th>Source</th>
                                <th>P/P/D</th>
                                <th>R/S/W</th>
                                <th>Pe/Po</th>
                                <th>Br. W</th>
                                <th>Spell</th>
                                <th>All</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            {{#each actor.data.items}}
                            {{#if (eq this.type "throwMod")}}
                            <tr class="item" data-item-id="{{this.id}}">
                                <td>
                                    <input
                                        type="text"
                                        class="itemTable-inputText item-edit"
                                        id="{{this.id}}.name"
                                        name="{{this.id}}.name"
                                        value="{{this.name}}"
                                        data-target="name"
                                        data-name=true
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.ppd"
                                        value="{{this.data.data.ppd}}"
                                        data-target="data.ppd"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.rsw"
                                        value="{{this.data.data.rsw}}"
                                        data-target="data.rsw"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.pepo"
                                        value="{{this.data.data.pepo}}"
                                        data-target="data.pepo"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.brw"
                                        value="{{this.data.data.brw}}"
                                        data-target="data.brw"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.spell"
                                        value="{{this.data.data.spell}}"
                                        data-target="data.spell"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.all"
                                        value="{{this.data.data.all}}"
                                        data-target="data.all"
                                        {{#if this.data.data.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <a
                                        class="item-delete"
                                        title="Delete Item"
                                        data-locked={{this.data.data.locked}}
                                    >
                                        <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <a
                                        class="item-toggle"
                                        title="Lock Item"
                                        data-value={{this.data.data.locked}}
                                        data-target="data.locked"
                                    >
                                        <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                    </a>
                                </td>
                                <td>
                                    <input
                                        type="checkbox"
                                        class="item-edit"
                                        name="{{this.id}}.active"
                                        data-target="data.active"
                                        {{checked this.data.data.active}}
                                    >
                                </td>
                            </tr>
                            {{/if}}
                            {{/each}}
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="throwMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab gear" data-group="primary" data-tab="gear">
            <div class="gear-top">
                <div class="gear-top-left">
                    <table class="itemTable">
                        <colgroup>
                            <col>
                            <col>
                            <col>
                            <col>
                        </colgroup>
                        <tr>
                            <th colspan="6">Gear Tabs</th>
                        </tr>
                        <tr>
                            <th id="gear-top-left-equipped">Equip?</th>
                            <th id="gear-top-left-default">Default?</th>
                            <th id="gear-top-left-tab">Tab</th>
                            <th id="gear-top-left-weight">Weight</th>
                            <th id="gear-top-left-buttons"></th>
                        </tr>
                        {{#each actor.data.data.gearTabs}}
                        <tr class="item" data-item-id="{{this.[0]}}">
                            <td>
                                <input
                                    type="checkbox"
                                    class="item-edit"
                                    data-target="data.equipped"
                                    {{checked this.[1].tab.data.data.equipped}}
                                >
                            </td>
                            <td>
                                <input
                                    type="checkbox"
                                    class="gearTab-defaultToggle"
                                    {{checked this.[1].tab.data.data.default}}
                                    {{#if this.[1].tab.data.data.default}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                {{#if this.[1].tab.data.data.locked}}
                                    {{this.[1].tab.name}}
                                {{else}}
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.[0]}}.name"
                                    name="{{this.[0]}}.name"
                                    value="{{this.[1].tab.name}}"
                                    data-target="name"
                                    data-name=true
                                >
                                {{/if}}
                            </td>
                            <td>{{this.[1].tab.data.data.weight}}</td>
                            <td>
                                <a
                                    class="gearTab-delete"
                                    title="Delete Tab"
                                    data-locked={{or this.[1].tab.data.data.default this.[1].tab.data.data.locked}}
                                >
                                    <i class="fas fa-trash {{#if (or this.[1].tab.data.data.default this.[1].tab.data.data.locked)}} disabled-color {{/if}}"></i>
                                </a>
                                <a
                                    class="item-toggle"
                                    title="Lock Item"
                                    data-value="{{this.[1].tab.data.data.locked}}"
                                    data-target="data.locked"
                                >
                                    <i class="fas {{#if this.[1].tab.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                </a>
                            </td>
                        </tr>
                        {{/each}}
                        <tr>
                            <td></td>
                            <td></td>
                            <td><b>Equipped weight</b></td>
                            <td><b>{{actor.data.data.equippedWeight}}</b></td>
                            <td></td>
                        </tr>
                    </table>
                    <div class="itemTable-buttons">
                        <a class="item-create" data-type="gearTab">Add tab <i class="fas fa-plus"></i></a>
                    </div>
                </div>
                <div class="gear-top-right">
                    <table class="itemTable">
                        <tr>
                            <th colspan="3">Encumbrance</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Weight</th>
                            <th>Speed</th>
                        </tr>
                        <tr id="encumbrance-base">
                            <td>Base</td>
                            <td>{{actor.data.data.weightLimits.base}}</td>
                            <td>{{actor.data.data.speedLevels.base}}</td>
                        </tr>
                        <tr id="encumbrance-light">
                            <td>Light</td>
                            <td>{{actor.data.data.weightLimits.light}}</td>
                            <td>{{actor.data.data.speedLevels.light}}</td>
                        </tr>
                        <tr id="encumbrance-medium">
                            <td>Medium</td>
                            <td>{{actor.data.data.weightLimits.medium}}</td>
                            <td>{{actor.data.data.speedLevels.medium}}</td>
                        </tr>
                        <tr id="encumbrance-heavy">
                            <td>Heavy</td>
                            <td>{{actor.data.data.weightLimits.heavy}}</td>
                            <td>{{actor.data.data.speedLevels.heavy}}</td>
                        </tr>
                        <tr id="encumbrance-severe">
                            <td>Severe</td>
                            <td>{{actor.data.data.weightLimits.severe}}</td>
                            <td>{{actor.data.data.speedLevels.severe}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <nav class="gear-tabs tabs" data-group="gear">
                {{#each actor.data.data.gearTabs}}
                <a class="item navbar-item droppable" data-tab="{{this.[0]}}" data-group="gear">{{this.[1].tab.name}}</a>
                {{/each}}
            </nav>
            <section class="gear-content">
                {{#each actor.data.data.gearTabs}}
                <div class="tab item droppable" data-tab="{{this.[0]}}" data-item-id="{{this.[0]}}" data-group="gear">
                    <div class="gear-tab-options">
                        Count tab towards encumbrance?
                        <input
                            type="checkbox"
                            class="item-edit"
                            data-target="data.equipped"
                            {{checked this.[1].tab.data.data.equipped}}
                        >
                        Set tab as default for new items?
                        <input
                            type="checkbox"
                            class="gearTab-defaultToggle"
                            {{checked this.[1].tab.data.data.default}}
                            {{#if this.[1].tab.data.data.default}}disabled{{/if}}
                        >
                    </div>
                    <div class="gear-tab-wrap">
                        <div class="gear-tab-items">
                            <table class="itemTable">
                                <thead>
                                    <tr>
                                        <th class="gearTableQty">Qty</th>
                                        <th class="gearTableName">Name</th>
                                        <th class="gearTableWgt">Wgt</th>
                                        <th class="gearTableVal">Val</th>
                                        <th class="gearTableButtons"></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {{#each this.[1].items}}
                                    <tr
                                        class="item itemTable-draggable-row"
                                        data-item-id="{{this.id}}"
                                        {{#unless this.data.data.locked}}draggable="true"{{/unless}}
                                    >
                                        <td>
                                            <input
                                                type="number"
                                                class="itemTable-inputNum item-edit"
                                                id="{{this.id}}.quantity"
                                                name="{{this.id}}.quantity"
                                                value="{{this.data.data.quantity}}"
                                                data-target="data.quantity"
                                                {{#if this.data.data.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="itemTable-inputText item-edit"
                                                id="{{this.id}}.name"
                                                name="{{this.id}}.name"
                                                value="{{this.name}}"
                                                data-target="name"
                                                data-name=true
                                                {{#if this.data.data.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="number"
                                                class="itemTable-inputNum item-edit"
                                                id="{{this.id}}.weight"
                                                name="{{this.id}}.weight"
                                                value="{{this.data.data.weight}}"
                                                data-target="data.weight"
                                                {{#if this.data.data.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="itemTable-inputText item-edit gear-tab-items-value"
                                                id="{{this.id}}.value"
                                                name="{{this.id}}.value"
                                                value="{{this.data.data.value}}"
                                                data-target="data.value"
                                                {{#if this.data.data.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <a
                                                class="item-open"
                                                title="View Item Notes"
                                                data-locked="{{this.data.data.locked}}"
                                            >
                                                <i class="fas fa-book"></i>
                                            </a>
                                            <a
                                                class="item-delete"
                                                title="Delete Item"
                                                data-locked={{this.data.data.locked}}
                                            >
                                                <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                                            </a>
                                            <a
                                                class="item-toggle"
                                                title="Lock Item"
                                                data-value={{this.data.data.locked}}
                                                data-target="data.locked"
                                            >
                                                <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                            <div class="itemTable-buttons">
                                <a
                                    class="item-create"
                                    data-type="gear"
                                    data-tab="{{this.[0]}}"
                                >
                                    <i class="fas fa-plus"></i> Add item
                                </a>
                            </div>
                        </div>
                        <div class="gear-tab-wealth">
                            <table class="gear-tab-wealth-table">
                                <thead>
                                    <tr>
                                        <th colspan="2" class="gear-tab-wealth-table-top">
                                            Coinage
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2" class="gear-tab-wealth-table-left gear-tab-wealth-table-right">
                                            Weight: <span>{{this.[1].tab.data.data.wealth.weight}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Copper</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.copper"
                                                value="{{this.[1].tab.data.data.wealth.copper}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Silver</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.silver"
                                                value="{{this.[1].tab.data.data.wealth.silver}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Gold</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.gold"
                                                value="{{this.[1].tab.data.data.wealth.gold}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Platinum</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.platinum"
                                                value="{{this.[1].tab.data.data.wealth.platinum}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Mithril</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.mithril"
                                                value="{{this.[1].tab.data.data.wealth.mithril}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-bottomLeft">Iron</th>
                                        <td class="gear-tab-wealth-table-bottomRight">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="data.wealth.iron"
                                                value="{{this.[1].tab.data.data.wealth.iron}}"
                                            />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                </div>
                {{/each}}
                <div class="tab" data-tab="+" data-group="gear">
                    click the '+' to add tabs
                </div>
            </section>
        </div>
        <div class="tab skills" data-group="primary" data-tab="skills">
            <div class="skills-top">
                <table class="itemTable">
                    <tr>
                        <th colspan="6">Non-Weapon Proficiencies</th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th>Stat</th>
                        <th>Base</th>
                        <th>Adjust</th>
                        <th>Total</th>
                        <th></th>
                    </tr>
                    {{#each actor.data.items}}
                    {{#if (eq this.type "nonWeaponProficiency")}}
                    <tr class="item" data-item-id={{this.id}}>
                        <td>
                            <input
                                type="text"
                                class="itemTable-inputText item-edit"
                                id="{{this.id}}.name"
                                name="{{this.id}}.name"
                                value="{{this.name}}"
                                data-target="name"
                                data-name=true
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <select
                                class="item-edit"
                                data-target="data.stat"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                                {{selectOptions @root.statChoices selected=this.data.data.stat}}
                            </select>
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.base"
                                name="{{this.id}}.base"
                                value="{{this.data.data.base}}"
                                data-target="data.base"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                id="{{this.id}}.adjust"
                                name="{{this.id}}.adjust"
                                value="{{this.data.data.adjust}}"
                                data-target="data.adjust"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <span
                                class="rollable skills-rollSpan"
                                data-roll="d20cs>=(20-{{this.data.data.total}})"
                                data-label="{{this.name}} Check"
                            >
                                {{this.data.data.total}}
                            </span>
                        </td>
                        <td>
                            <a
                                class="item-delete"
                                title="Delete Item"
                                data-locked={{this.data.data.locked}}
                            >
                                <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                            </a>
                            <a
                                class="item-toggle"
                                title="Lock Item"
                                data-value={{this.data.data.locked}}
                                data-target="data.locked"
                            >
                                <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                            </a>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="nonWeaponProficiency"><i class="fas fa-plus"></i> Add non-weapon proficiency</a>
                </div>
            </div>
            <div class="skills-mid">
                <table class="itemTable">
                    <tr>
                        <th colspan="3">Weapon Proficiencies</th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th>Slots</th>
                        <th></th>
                    </tr>
                    {{#each actor.data.items}}
                    {{#if (eq this.type "weaponProficiency")}}
                    <tr class="item" data-item-id="{{this.id}}">
                        <td>
                            <input
                                type="text"
                                class="itemTable-inputText item-edit"
                                id="{{this.id}}.name"
                                name="{{this.id}}.name"
                                value="{{this.name}}"
                                data-target="name"
                                data-name=true
                                {{#if this.data.data.locked}}disabled{{/if}}
                            />
                        </td>
                        <td>
                            <input
                                type="number"
                                class="itemTable-inputNum item-edit"
                                name="{{this.id}}.base"
                                value="{{this.data.data.base}}"
                                data-target="data.base"
                                {{#if this.data.data.locked}}disabled{{/if}}
                            >
                        </td>
                        <td>
                            <a
                                class="item-delete"
                                title="Delete Item"
                                data-locked={{this.data.data.locked}}
                            >
                                <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                            </a>
                            <a
                                class="item-toggle"
                                title="Lock Item"
                                data-value={{this.data.data.locked}}
                                data-target="data.locked"
                            >
                                <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                            </a>
                        </td>
                    </tr>
                    {{/if}}
                    {{/each}}
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="weaponProficiency"><i class="fas fa-plus"></i> Add weapon proficiency</a>
                </div>
            </div>
        </div>
        <div class="tab spells" data-group="primary" data-tab="spells">
            <div class="spells-tables">
                {{#each data.data.spellTabs}}
                <div class="spells-{{this.level}}">
                    <table class="itemTable">
                        <tr>
                            <th colspan="4">{{this.level}}{{this.suffix}} level spells</th>
                        </tr>
                        <tr>
                            <th>Casts</th>
                            <th colspan="2">
                                Spell Slots
                                <input
                                    type="number"
                                    class="itemTable-inputNum"
                                    value="{{this.slots}}"
                                    name="data.spellTabs.{{@key}}.slots"
                                >
                            </th>
                            <th></th>
                        </tr>
                        {{#each this.spells}}
                        <tr class="item" data-item-id="{{this.id}}">
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    name="{{this.id}}.casts"
                                    value="{{this.data.data.casts}}"
                                    data-target="data.casts"
                                    {{#if this.data.data.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.name"
                                    name="{{this.id}}.name"
                                    value="{{this.name}}"
                                    data-target="name"
                                    data-name=true
                                    {{#if this.data.data.locked}}disabled{{/if}}
                                />
                            </td>
                            <td>
                                <i title="Verbal" class="spells-component {{#if this.data.data.verbal}}enabled{{/if}}">V</i>
                                <i title="Somatic" class="spells-component {{#if this.data.data.somatic}}enabled{{/if}}">S</i>
                                <i title="Material" class="spells-component {{#if this.data.data.material}}enabled{{/if}}">M</i>
                            </td>
                            <td>
                                <a
                                    class="item-delete"
                                    title="Delete Item"
                                    data-locked={{this.data.data.locked}}
                                >
                                    <i class="fas fa-trash {{#if this.data.data.locked}} disabled-color {{/if}}"></i>
                                </a>
                                <a
                                    class="item-toggle"
                                    title="Lock Item"
                                    data-value={{this.data.data.locked}}
                                    data-target="data.locked"
                                >
                                    <i class="fas {{#if this.data.data.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                </a>
                                <a
                                    class="item-open"
                                    title="View Item Notes"
                                    data-locked="{{this.data.data.locked}}"
                                >
                                    <i class="fas fa-book"></i>
                                </a>
                            </td>
                        </tr>
                        {{/each}}
                    </table>
                    <div class="itemTable-buttons">
                        <a class="item-create" data-type="spell" data-level="{{this.level}}"><i class="fas fa-plus"></i> Add {{this.level}}{{this.suffix}} level spell</a>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        <div class="tab settings settings-list" data-group="primary" data-tab="settings">
            <h2 class="module-header">Character Sheet Settings</h2>
            <div class="form-group">
                <label>Show Basic Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="data.settings.sheetToggle.basic"
                        {{checked this.data.data.settings.sheetToggle.basic}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Combat Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="data.settings.sheetToggle.combat"
                        {{checked this.data.data.settings.sheetToggle.combat}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Gear Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="data.settings.sheetToggle.gear"
                        {{checked this.data.data.settings.sheetToggle.gear}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Skills Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="data.settings.sheetToggle.skills"
                        {{checked this.data.data.settings.sheetToggle.skills}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Spells Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="data.settings.sheetToggle.spells"
                        {{checked this.data.data.settings.sheetToggle.spells}}
                    >
                </div>
            </div>
        </div>
    </section>
</form>
