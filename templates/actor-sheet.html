<form class="{{cssClass}}" autocomplete="off">
    <nav class="primary-tabs tabs" data-group="primary">
        {{#if data.system.settings.sheetToggle.basic}}
        <a class="item navbar-item" data-tab="basic" data-group="primary">BASIC</a>
        {{/if}}
        {{#if data.system.settings.sheetToggle.combat}}
        <a class="item navbar-item" data-tab="combat" data-group="primary">COMBAT</a>
        {{/if}}
        {{#if data.system.settings.sheetToggle.gear}}
        <a class="item navbar-item" data-tab="gear" data-group="primary">GEAR</a>
        {{/if}}
        {{#if data.system.settings.sheetToggle.skills}}
        <a class="item navbar-item" data-tab="skills" data-group="primary">SKILLS</a>
        {{/if}}
        {{#if data.system.settings.sheetToggle.spells}}
        <a class="item navbar-item" data-tab="spells" data-group="primary">SPELLS</a>
        {{/if}}
        <a class="item navbar-item" data-tab="settings" data-group="primary">SETTINGS</a>
    </nav>
    <section class="primary-content">
        <div class="tab basic" data-group="primary" data-tab="basic">
            <div class="basic-top">
                <table>
                    <tr>
                        <td>Player:</td>
                        <td>
                            <input
                                name="system.playerName"
                                type="text"
                                value="{{data.system.playerName}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Name:</td>
                        <td>
                            <input
                                name="name"
                                type="text"
                                value="{{data.name}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Languages:</td>
                        <td>
                            <input
                                name="system.languages"
                                type="text"
                                value="{{data.system.languages}}"
                                title="{{data.system.languages}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Alignment:</td>
                        <td>
                            <select name="system.alignment" class="basic-top-alignment">
                                {{selectOptions data.system.alignmentChoices selected=data.system.alignment}}
                            </select>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Race:</td>
                        <td>
                            <input
                                name="system.race"
                                type="text"
                                value="{{data.system.race}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Classes:</td>
                        <td>
                            <input
                                name="system.classes"
                                type="text"
                                value="{{data.system.classes}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>XP:</td>
                        <td>
                            <input
                                name="system.xp"
                                type="text"
                                value="{{data.system.xp}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Levels:</td>
                        <td>
                            <input
                                name="system.levels"
                                type="text"
                                value="{{data.system.levels}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Body Weight:</td>
                        <td>
                            <input
                                name="system.bodyWeight"
                                type="number"
                                value="{{data.system.bodyWeight}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Height:</td>
                        <td>
                            <input
                                name="system.height"
                                type="text"
                                value="{{data.system.height}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Sex:</td>
                        <td>
                            <input
                                name="system.sex"
                                type="text"
                                value="{{data.system.sex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Gender:</td>
                        <td>
                            <input
                                name="system.gender"
                                type="text"
                                value="{{data.system.gender}}"
                            />
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>Size:</td>
                        <td colspan="3">
                            <input
                                name="system.size"
                                type="text"
                                value="{{data.system.size}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Speed:
                        </td>
                        <td>
                            <input
                                type="number"
                                name="system.speed"
                                value="{{data.system.speed}}"
                            />
                        </td>
                        <td>Mod:</td>
                        <td>
                            <span class="basic-top-speedMod"><b>{{data.system.speedMod}}</b></span>
                        </td>
                    </tr>
                    <tr>
                        <td>Age:</td>
                        <td colspan="3">
                            <input
                                name="system.age"
                                type="text"
                                value="{{data.system.age}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>Handed:</td>
                        <td colspan="3">
                            <input
                                name="system.handed"
                                type="text"
                                value="{{data.system.handed}}"
                            />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="basic-mid">
                <table class="basic-mid-stats">
                    <tr>
                        <td>STR</td>
                        <td>
                            <input
                                name="system.str"
                                type="number"
                                value="{{data.system.str}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>DEX</td>
                        <td>
                            <input
                                name="system.dex"
                                type="number"
                                value="{{data.system.dex}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CON</td>
                        <td>
                            <input
                                name="system.con"
                                type="number"
                                value="{{data.system.con}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>INT</td>
                        <td>
                            <input
                                name="system.int"
                                type="number"
                                value="{{data.system.int}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>WIS</td>
                        <td>
                            <input
                                name="system.wis"
                                type="number"
                                value="{{data.system.wis}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>CHA</td>
                        <td>
                            <input
                                name="system.cha"
                                type="number"
                                value="{{data.system.cha}}"
                            />
                        </td>
                    </tr>
                    <tr>
                        <td>PER</td>
                        <td>
                            <input
                                name="system.per"
                                type="number"
                                value="{{data.system.per}}"
                            />
                        </td>
                    </tr>
                </table>
                <div>
                    <div class="basic-derivedRow basic-derivedRow-altColor">
                        <div>
                            <span class="derived-label">
                                Melee Attack Adjust
                            </span>
                            <span class="derived-value">
                                {{data.system.meleeAttackAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Melee Damage Adjust
                            </span>
                            <span class="derived-value">
                                {{data.system.meleeDamageAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Weight Allowance
                            </span>
                            <span class="derived-value">
                                {{data.system.weightAllowance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Press
                            </span>
                            <span class="derived-value">
                                {{data.system.maxPress}}
                            </span>
                        </div>
                        <div 
                            class="rollable"
                            data-roll="d20cs<={{data.system.openDoors}}"
                            data-label="Open Doors Check"
                        >
                            <span class="derived-label">
                                Open Doors
                            </span>
                            <span class="derived-value">
                                {{data.system.openDoors}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.system.bendBars}}"
                            data-label="Bend Bars Check"
                        >
                            <span class="derived-label">
                                Bend Bars
                            </span>
                            <span class="derived-value">
                                {{data.system.bendBars}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-dex">
                        <div>
                            <span class="derived-label">
                                Missile Hit Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.system.missileHitAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Defensive Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.system.defenseAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-con">
                        <div>
                            <span class="derived-label">
                                HP Adjust
                            </span>
                            <span class="derived-value">
                                {{data.system.hitPointAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                System Shock
                            </span>
                            <span class="derived-value">
                                {{data.system.systemShock}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Poison Save
                            </span>
                            <span class="derived-value">
                                {{data.system.poisonSave}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Regen
                            </span>
                            <span class="derived-value">
                                {{data.system.regen}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-int">
                        <div>
                            <span class="derived-label">
                                Languages
                            </span>
                            <span class="derived-value">
                                {{data.system.numLanguages}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spell Level
                            </span>
                            <span class="derived-value">
                                {{data.system.maxSpellLevel}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.system.spellLearnChance}}"
                            data-label="Chance to Learn Spell"
                        >
                            <span class="derived-label">
                                Chance to Learn Spell
                            </span>
                            <span class="derived-value">
                                {{data.system.spellLearnChance}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Max Spells per Level
                            </span>
                            <span class="derived-value">
                                {{data.system.maxSpellPerLevel}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-wis">
                        <div>
                            <span class="derived-label">
                                Magical Defense Adjust
                            </span>
                            <span class="derived-value">
                                {{data.system.magicDefenseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Bonus Spells
                            </span>
                            <span class="derived-value">
                                {{data.system.bonusSpells}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="d100cs<={{data.system.chanceSpellFailure}}"
                            data-label="Spell Failure"
                        >
                            <span class="derived-label">
                                Spell Failure
                            </span>
                            <span class="derived-value">
                                {{data.system.chanceSpellFailure}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow" id="derived-cha">
                        <div>
                            <span class="derived-label">
                                Henchmen
                            </span>
                            <span class="derived-value">
                                {{data.system.maxHenchmen}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Loyalty Base
                            </span>
                            <span class="derived-value">
                                {{data.system.loyaltyBase}}
                            </span>
                        </div>
                        <div
                            class="rollable"
                            data-roll="2d10+{{data.system.reactionAdjust}}"
                            data-label="Encounter Reaction"
                        >
                            <span class="derived-label">
                                Reaction Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.system.reactionAdjust}}
                            </span>
                        </div>
                    </div>
                    <div class="basic-derivedRow basic-derivedRow-altColor" id="derived-per">
                        <div
                            class="rollable"
                            data-roll="d10cs>(3-{{data.system.surpriseAdjust}})"
                            data-label="Surprise Check"
                        >
                            <span class="derived-label">
                                Surprise Adjustment
                            </span>
                            <span class="derived-value">
                                {{data.system.surpriseAdjust}}
                            </span>
                        </div>
                        <div>
                            <span class="derived-label">
                                Illusion Immunity
                            </span>
                            <span class="derived-value">
                                {{data.system.illusionImmunity}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab combat" data-group="primary" data-tab="combat">
            <div class="combat-top">
                <div class="combat-top-hp">
                    <span
                        class="rollable"
                        data-roll="{{data.system.hitDieRoll}}+{{data.system.hitPointAdjust}}"
                        data-label="Hit Die"
                    >Hit Points</span>
                    <hr />
                    <div>
                        <div>
                            <input
                                name="system.health.value"
                                type="number"
                                value="{{data.system.health.value}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Current</span>
                        </div>
                        <div>
                            <input
                                name="system.health.max"
                                type="number"
                                value="{{data.system.health.max}}"
                                class="combat-big-text"
                            />
                            <br />
                            <span>Maximum</span>
                        </div>
                        <div>
                            <select class="combat-big-text combat-top-select" name="system.hitDieRoll">
                                {{selectOptions data.system.hitDieChoices selected=data.system.hitDieRoll}}
                            </select>
                            <br />
                            <span>Hit Dice</span>
                        </div>
                    </div>
                    <!--
                    <div 
                        class="combat-top-hp-button rollable"
                        data-roll="{{data.system.hitDieRollAdjusted}}"
                        data-label="Hit Die"
                    ></div>
                    -->
                </div>
                <div class="combat-top-ac">
                    <span>Armor Class</span>
                    <hr />
                    <div>
                        <div>
                            <span class="combat-big-text">{{data.system.armorClasses.total}}</span>
                            <span>Total</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.system.armorClasses.back}}</span>
                            <span>Back</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.system.armorClasses.touch}}</span>
                            <span>Touch</span>
                        </div>
                        <div>
                            <span class="combat-big-text">{{data.system.armorClasses.surprise}}</span>
                            <span>Surprise</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="combat-weapons">
                <table class="itemTable">
                    <tr>
                        <th colspan="12">Weapons</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th># Atks</th>
                        <th>To Hit</th>
                        <th>Dmg Roll</th>
                        <th>Range</th>
                        <th>Atk Type</th>
                        <th>Dmg Type</th>
                        <th>Speed</th>
                        <th></th>
                        <!--th>Init</th-->
                        <th>Atk</th>
                        <th>Dmg</th>
                    </tr>
                    <tbody class="itemTable-sort">
                        {{#each data.system.weapons}}
                        <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                            <td>
                                <a
                                    class="itemTable-handle"
                                    data-locked="{{this.system.locked}}"
                                >
                                    <i class="fas fa-bars"></i>
                                </a>
                            </td>
                            <td>
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.name"
                                    name="{{this.id}}.name"
                                    value="{{this.name}}"
                                    data-target="name"
                                    data-name=true
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    id="{{this.id}}.numAttacks"
                                    name="{{this.id}}.numAttacks"
                                    value="{{this.system.numAttacks}}"
                                    data-target="system.numAttacks"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    id="{{this.id}}.toHit"
                                    name="{{this.id}}.toHit"
                                    value="{{this.system.toHit}}"
                                    data-target="system.toHit"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td class="weapon-damage">
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.damageRoll"
                                    name="{{this.id}}.damageRoll"
                                    value="{{this.system.damageRoll}}"
                                    data-target="system.damageRoll"
                                    {{#if this.system.locked}}disabled{{/if}}
                                />
                            </td>
                            <td class="weapon-range">
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.range"
                                    name="{{this.id}}.range"
                                    value="{{this.system.range}}"
                                    data-target="system.range"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <select
                                    class="item-edit"
                                    data-target="system.attackType"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                                    {{selectOptions @root.data.system.attackTypeChoices selected=this.system.attackType}}
                                </select>
                            </td>
                            <td>
                                <select
                                    class="item-edit"
                                    data-target="system.damageType"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                                    {{selectOptions @root.data.system.damageTypeChoices selected=this.system.damageType}}
                                </select>
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    id="{{this.id}}.speed"
                                    name="{{this.id}}.speed"
                                    value="{{this.system.speed}}"
                                    data-target="system.speed"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <a
                                    class="item-delete"
                                    title="Delete Item"
                                    data-locked={{this.system.locked}}
                                >
                                    <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                </a>
                                <a
                                    class="item-toggle"
                                    title="Lock Item"
                                    data-value={{this.system.locked}}
                                    data-target="system.locked"
                                >
                                    <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                </a>
                            </td>
                            <!--td class="weapon-roll-td">
                                <a class="rollable weapon-roll"></a>
                                TODO: initiative roll
                            </td-->
                            <td class="weapon-roll-td">
                                <a
                                    class="rollable weapon-roll"
                                    data-roll="
                                        1d20
                                        +{{this.system.toHit}}
                                        {{#if (eq this.system.attackType 'Melee')}}
                                            +{{this.system.hitAdjust.melee}}
                                        {{/if}}
                                        {{#if (eq this.system.attackType 'Missile')}}
                                            +{{this.system.hitAdjust.missile}}
                                        {{/if}}
                                        {{#if (eq this.system.attackType 'Thrown')}}
                                            +{{this.system.hitAdjust.thrown}}
                                        {{/if}}
                                    "
                                    data-label="to hit with {{this.name}}"
                                ></a>
                            </td>
                            <td class="weapon-roll-td">
                                <a
                                    class="rollable weapon-roll"
                                    data-roll="{{this.system.damageRoll}}"
                                    data-label="damage with {{this.name}}"
                                ></a>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="weapon"><i class="fas fa-plus"></i> Add weapon</a>
                </div>
            </div>
            <div class="combat-modTables">
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">
                                Hit Adjust
                            </th>
                        </tr>
                        <tr>
                            <td>Melee</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.system.hitAdjust.melee}}"
                                data-label="Basic Melee Attack"
                            >
                                {{#if (gte data.system.hitAdjust.melee 0)}}+{{/if}}{{data.system.hitAdjust.melee}}
                            </td>
                        </tr>
                        <tr>
                            <td>Missile</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.system.hitAdjust.missile}}"
                                data-label="Basic Missile Attack"
                            >
                                {{#if (gte data.system.hitAdjust.missile 0)}}+{{/if}}{{data.system.hitAdjust.missile}}
                            </td>
                        </tr>
                        <tr>
                            <td>Thrown</td>
                            <td
                                class="rollable combat-mid-throws-value combat-big-text"
                                data-roll="d20+{{data.system.hitAdjust.thrown}}"
                                data-label="Basic Thrown Attack"
                            >
                                {{#if (gte data.system.hitAdjust.thrown 0)}}+{{/if}}{{data.system.hitAdjust.thrown}}
                            </td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <tr>
                                <th colspan="8">To-Hit Modifiers</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th>Source</th>
                                <th>Melee</th>
                                <th>Missile</th>
                                <th>Thrown</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            <tbody class="itemTable-sort">
                                {{#each data.system.combatMods.hitMods}}
                                <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                                    <td>
                                        <a
                                            class="itemTable-handle"
                                            data-locked="{{this.system.locked}}"
                                        >
                                            <i class="fas fa-bars"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="text"
                                            class="itemTable-inputText item-edit"
                                            id="{{this.id}}.name"
                                            name="{{this.id}}.name"
                                            value="{{this.name}}"
                                            data-target="name"
                                            data-name=true
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.melee"
                                            name="{{this.id}}.melee"
                                            value="{{this.system.melee}}"
                                            data-target="system.melee"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.missile"
                                            name="{{this.id}}.missile"
                                            value="{{this.system.missile}}"
                                            data-target="system.missile"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.thrown"
                                            name="{{this.id}}.thrown"
                                            value="{{this.system.thrown}}"
                                            data-target="system.thrown"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <a
                                            class="item-delete"
                                            title="Delete Item"
                                            data-locked={{this.system.locked}}
                                        >
                                            <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <a
                                            class="item-toggle"
                                            title="Lock Item"
                                            data-value={{this.system.locked}}
                                            data-target="system.locked"
                                        >
                                            <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="checkbox"
                                            class="item-edit"
                                            name="{{this.id}}.active"
                                            data-target="system.active"
                                            {{checked this.system.active}}
                                        >
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="hitMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">
                                Armor Classes
                            </th>
                        </tr>
                        <tr>
                            <td>Natural</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.natural}}</td>
                        </tr>
                        <tr>
                            <td>Dexterity</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.dexterity}}</td>
                        </tr>
                        <tr>
                            <td>Armor</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.armor}}</td>
                        </tr>
                        <tr>
                            <td>Shield</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.shield}}</td>
                        </tr>
                        <tr>
                            <td>Magic</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.magic}}</td>
                        </tr>
                        <tr>
                            <td>Encumbrance</td>
                            <td class="combat-mid-throws-value combat-big-text">{{data.system.armorClasses.encumbrance}}</td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <tbody>
                            <tr>
                                <th colspan="10">AC Modifiers</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th>Source</th>
                                <th>Natural</th>
                                <th>Dexterity</th>
                                <th>Armor</th>
                                <th>Shield</th>
                                <th>Magic</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            <tbody class="itemTable-sort">
                                {{#each data.system.combatMods.acMods}}
                                <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                                    <td>
                                        <a
                                            class="itemTable-handle"
                                            data-locked="{{this.system.locked}}"
                                        >
                                            <i class="fas fa-bars"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="text"
                                            class="itemTable-inputText item-edit"
                                            id="{{this.id}}.name"
                                            name="{{this.id}}.name"
                                            value="{{this.name}}"
                                            data-target="name"
                                            data-name=true
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.natural"
                                            name="{{this.id}}.natural"
                                            value="{{this.system.natural}}"
                                            data-target="system.natural"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.dexterity"
                                            name="{{this.id}}.dexterity"
                                            value="{{this.system.dexterity}}"
                                            data-target="system.dexterity"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.armor"
                                            name="{{this.id}}.armor"
                                            value="{{this.system.armor}}"
                                            data-target="system.armor"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.shield"
                                            name="{{this.id}}.shield"
                                            value="{{this.system.shield}}"
                                            data-target="system.shield"
                                            {{#if this.system.locked}}disabled{{/if}}
                                    >
                                </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            id="{{this.id}}.magic"
                                            name="{{this.id}}.magic"
                                            value="{{this.system.magic}}"
                                            data-target="system.magic"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <a
                                            class="item-delete"
                                            title="Delete Item"
                                            data-locked={{this.system.locked}}
                                        >
                                            <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <a
                                            class="item-toggle"
                                            title="Lock Item"
                                            data-value={{this.system.locked}}
                                            data-target="system.locked"
                                        >
                                            <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="checkbox"
                                            class="item-edit"
                                            name="{{this.id}}.active"
                                            data-target="system.active"
                                            {{checked this.system.active}}
                                        >
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="acMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
                <div class="combat-mid">
                    <table class="combat-mid-throws">
                        <tr>
                            <th colspan="2">Saving Throws</th>
                        </tr>
                        <tr>
                            <td>
                                Paralyzation, Poison, Death
                            </td>
                            <!-- TODO: Constitution modifier for posion -->
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.system.savingThrows.ppd}}"
                                data-label="Saving Throw against Paralyzation/Poison/Death"
                            >
                                {{data.system.savingThrows.ppd}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Rods, Staves, Wands
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.system.savingThrows.rsw}}"
                                data-label="Saving Throw against Rods/Staves/Wands"
                            >
                                {{data.system.savingThrows.rsw}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Petrification, Polymorph
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.system.savingThrows.pepo}}"
                                data-label="Saving Throw against Petrification/Polymorph"
                            >
                                {{data.system.savingThrows.pepo}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Breath Weapon
                            </td>
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.system.savingThrows.brw}}"
                                data-label="Saving Throw against Breath Weapon"
                            >
                                {{data.system.savingThrows.brw}}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Spell
                            </td>
                            <!-- TODO: Wisdom modifier for "mind"-affecting spells -->
                            <td
                                class="rollable combat-big-text combat-mid-throws-value"
                                data-roll="d20cs>={{data.system.savingThrows.spell}}"
                                data-label="Saving Throw against Spell"
                            >
                                {{data.system.savingThrows.spell}}
                            </td>
                        </tr>
                    </table>
                    <div class="combat-mid-throwMods">
                        <table class="itemTable">
                            <tr>
                                <th colspan="11">Saving Throw Modifiers</th>
                            </tr>
                            <tr>
                                <th></th>
                                <th>Source</th>
                                <th>P/P/D</th>
                                <th>R/S/W</th>
                                <th>Pe/Po</th>
                                <th>Br. W</th>
                                <th>Spell</th>
                                <th>All</th>
                                <th></th>
                                <th></th>
                                <th>Active?</th>
                            </tr>
                            <tbody class="itemTable-sort">
                                {{#each data.system.combatMods.throwMods}}
                                <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                                    <td>
                                        <a
                                            class="itemTable-handle"
                                            data-locked="{{this.[1].tab.system.locked}}"
                                        >
                                            <i class="fas fa-bars"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="text"
                                            class="itemTable-inputText item-edit"
                                            id="{{this.id}}.name"
                                            name="{{this.id}}.name"
                                            value="{{this.name}}"
                                            data-target="name"
                                            data-name=true
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.ppd"
                                            value="{{this.system.ppd}}"
                                            data-target="system.ppd"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.rsw"
                                            value="{{this.system.rsw}}"
                                            data-target="system.rsw"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.pepo"
                                            value="{{this.system.pepo}}"
                                            data-target="system.pepo"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.brw"
                                            value="{{this.system.brw}}"
                                            data-target="system.brw"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.spell"
                                            value="{{this.system.spell}}"
                                            data-target="system.spell"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <input
                                            type="number"
                                            class="itemTable-inputNum item-edit"
                                            name="{{this.id}}.all"
                                            value="{{this.system.all}}"
                                            data-target="system.all"
                                            {{#if this.system.locked}}disabled{{/if}}
                                        >
                                    </td>
                                    <td>
                                        <a
                                            class="item-delete"
                                            title="Delete Item"
                                            data-locked={{this.system.locked}}
                                        >
                                            <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <a
                                            class="item-toggle"
                                            title="Lock Item"
                                            data-value={{this.system.locked}}
                                            data-target="system.locked"
                                        >
                                            <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                        </a>
                                    </td>
                                    <td>
                                        <input
                                            type="checkbox"
                                            class="item-edit"
                                            name="{{this.id}}.active"
                                            data-target="system.active"
                                            {{checked this.system.active}}
                                        >
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                        <div class="itemTable-buttons">
                            <a class="item-create" data-type="throwMod"><i class="fas fa-plus"></i> Add modifier</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab gear" data-group="primary" data-tab="gear">
            <div class="gear-top">
                <div class="gear-top-left">
                    <table class="itemTable">
                        <tr>
                            <th colspan="7">Gear Tabs</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th id="gear-top-left-equipped">Equip?</th>
                            <th id="gear-top-left-default">Default?</th>
                            <th id="gear-top-left-tab">Tab</th>
                            <th id="gear-top-left-weight">Weight</th>
                            <th id="gear-top-left-buttons"></th>
                        </tr>
                        <tbody class="itemTable-sort">
                            {{#each data.system.gearTabs}}
                            <tr
                                class="item"
                                data-item-id="{{this.[0]}}"
                                data-locked="{{this.[1].tab.system.locked}}"
                            >
                                <td>
                                    <a
                                        class="itemTable-handle"
                                        data-locked="{{this.[1].tab.system.locked}}"
                                    >
                                        <i class="fas fa-bars"></i>
                                    </a>
                                </td>
                                <td>
                                    <input
                                        type="checkbox"
                                        class="item-edit"
                                        data-target="system.equipped"
                                        {{checked this.[1].tab.system.equipped}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="checkbox"
                                        class="gearTab-defaultToggle"
                                        {{checked this.[1].tab.system.default}}
                                        {{#if this.[1].tab.system.default}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    {{#if this.[1].tab.system.locked}}
                                        {{this.[1].tab.name}}
                                    {{else}}
                                    <input
                                        type="text"
                                        class="itemTable-inputText item-edit"
                                        id="{{this.[0]}}.name"
                                        name="{{this.[0]}}.name"
                                        value="{{this.[1].tab.name}}"
                                        data-target="name"
                                        data-name=true
                                    >
                                    {{/if}}
                                </td>
                                <td>{{this.[1].tab.system.weight}}</td>
                                <td>
                                    <a
                                        class="gearTab-delete"
                                        title="Delete Tab"
                                        data-locked={{or this.[1].tab.system.default this.[1].tab.system.locked}}
                                    >
                                        <i class="fas fa-trash {{#if (or this.[1].tab.system.default this.[1].tab.system.locked)}} disabled-color {{/if}}"></i>
                                    </a>
                                    <a
                                        class="item-toggle"
                                        title="Lock Item"
                                        data-value="{{this.[1].tab.system.locked}}"
                                        data-target="system.locked"
                                    >
                                        <i class="fas {{#if this.[1].tab.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                    </a>
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td><b>Equipped weight</b></td>
                            <td><b>{{data.system.equippedWeight}}</b></td>
                            <td></td>
                        </tr>
                    </table>
                    <div class="itemTable-buttons">
                        <a class="item-create" data-type="gearTab">Add tab <i class="fas fa-plus"></i></a>
                    </div>
                </div>
                <div class="gear-top-right">
                    <table class="itemTable">
                        <tr>
                            <th colspan="3">Encumbrance</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Weight</th>
                            <th>Speed</th>
                        </tr>
                        <tr id="encumbrance-base">
                            <td>Base</td>
                            <td>{{data.system.weightLimits.base}}</td>
                            <td>{{data.system.speedLevels.base}}</td>
                        </tr>
                        <tr id="encumbrance-light">
                            <td>Light</td>
                            <td>{{data.system.weightLimits.light}}</td>
                            <td>{{data.system.speedLevels.light}}</td>
                        </tr>
                        <tr id="encumbrance-medium">
                            <td>Medium</td>
                            <td>{{data.system.weightLimits.medium}}</td>
                            <td>{{data.system.speedLevels.medium}}</td>
                        </tr>
                        <tr id="encumbrance-heavy">
                            <td>Heavy</td>
                            <td>{{data.system.weightLimits.heavy}}</td>
                            <td>{{data.system.speedLevels.heavy}}</td>
                        </tr>
                        <tr id="encumbrance-severe">
                            <td>Severe</td>
                            <td>{{data.system.weightLimits.severe}}</td>
                            <td>{{data.system.speedLevels.severe}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <nav class="gear-tabs tabs" data-group="gear">
                {{#each data.system.gearTabs}}
                <a class="item navbar-item droppable" data-tab="{{this.[0]}}" data-group="gear">{{this.[1].tab.name}}</a>
                {{/each}}
            </nav>
            <section class="gear-content">
                {{#each data.system.gearTabs}}
                <div class="tab item droppable" data-tab="{{this.[0]}}" data-item-id="{{this.[0]}}" data-group="gear">
                    <div class="gear-tab-options">
                        Count tab towards encumbrance?
                        <input
                            type="checkbox"
                            class="item-edit"
                            data-target="system.equipped"
                            {{checked this.[1].tab.system.equipped}}
                        >
                        Set tab as default for new items?
                        <input
                            type="checkbox"
                            class="gearTab-defaultToggle"
                            {{checked this.[1].tab.system.default}}
                            {{#if this.[1].tab.system.default}}disabled{{/if}}
                        >
                    </div>
                    <div class="gear-tab-wrap">
                        <div class="gear-tab-items">
                            <table class="itemTable">
                                <thead>
                                    <tr>
                                        <th></th>
                                        <th class="gearTableQty">Qty</th>
                                        <th class="gearTableName">Name</th>
                                        <th class="gearTableWgt">Wgt</th>
                                        <th class="gearTableVal">Val</th>
                                        <th class="gearTableButtons"></th>
                                    </tr>
                                </thead>
                                <tbody class="itemTable-sort">
                                    {{#each this.[1].items}}
                                    <tr
                                        class="item itemTable-draggable-row"
                                        data-item-id="{{this.id}}"
                                        data-locked="{{this.system.locked}}"
                                    >
                                        <td>
                                            <a
                                                class="itemTable-handle"
                                                data-locked="{{this.system.locked}}"
                                            >
                                                <i class="fas fa-bars"></i>
                                            </a>
                                        </td>
                                        <td>
                                            <input
                                                type="number"
                                                class="itemTable-inputNum item-edit"
                                                id="{{this.id}}.quantity"
                                                name="{{this.id}}.quantity"
                                                value="{{this.system.quantity}}"
                                                data-target="system.quantity"
                                                {{#if this.system.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="itemTable-inputText item-edit"
                                                id="{{this.id}}.name"
                                                name="{{this.id}}.name"
                                                value="{{this.name}}"
                                                data-target="name"
                                                data-name=true
                                                {{#if this.system.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="number"
                                                class="itemTable-inputNum item-edit"
                                                id="{{this.id}}.weight"
                                                name="{{this.id}}.weight"
                                                value="{{this.system.weight}}"
                                                data-target="system.weight"
                                                {{#if this.system.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <input
                                                type="text"
                                                class="itemTable-inputText item-edit gear-tab-items-value"
                                                id="{{this.id}}.value"
                                                name="{{this.id}}.value"
                                                value="{{this.system.value}}"
                                                data-target="system.value"
                                                {{#if this.system.locked}}disabled{{/if}}
                                            >
                                        </td>
                                        <td>
                                            <a
                                                class="item-open"
                                                title="View Item Notes"
                                                data-locked="{{this.system.locked}}"
                                            >
                                                <i class="fas fa-book"></i>
                                            </a>
                                            <a
                                                class="item-delete"
                                                title="Delete Item"
                                                data-locked={{this.system.locked}}
                                            >
                                                <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                            </a>
                                            <a
                                                class="item-toggle"
                                                title="Lock Item"
                                                data-value={{this.system.locked}}
                                                data-target="system.locked"
                                            >
                                                <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                            </a>
                                        </td>
                                    </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                            <div class="itemTable-buttons">
                                <a
                                    class="item-create"
                                    data-type="gear"
                                    data-tab="{{this.[0]}}"
                                >
                                    <i class="fas fa-plus"></i> Add item
                                </a>
                            </div>
                        </div>
                        <div class="gear-tab-wealth">
                            <table class="gear-tab-wealth-table">
                                <thead>
                                    <tr>
                                        <th colspan="2" class="gear-tab-wealth-table-top">
                                            Coinage
                                        </th>
                                    </tr>
                                    <tr>
                                        <th colspan="2" class="gear-tab-wealth-table-left gear-tab-wealth-table-right">
                                            Weight: <span>{{this.[1].tab.system.wealth.weight}}</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Copper</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.copper"
                                                value="{{this.[1].tab.system.wealth.copper}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Silver</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.silver"
                                                value="{{this.[1].tab.system.wealth.silver}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Gold</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.gold"
                                                value="{{this.[1].tab.system.wealth.gold}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Platinum</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.platinum"
                                                value="{{this.[1].tab.system.wealth.platinum}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-left">Mithril</th>
                                        <td class="gear-tab-wealth-table-right">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.mithril"
                                                value="{{this.[1].tab.system.wealth.mithril}}"
                                            />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th class="gear-tab-wealth-table-bottomLeft">Iron</th>
                                        <td class="gear-tab-wealth-table-bottomRight">
                                            <input
                                                type="number"
                                                class="item-edit gear-wealth-inputNum"
                                                data-target="system.wealth.iron"
                                                value="{{this.[1].tab.system.wealth.iron}}"
                                            />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                </div>
                {{/each}}
                <div class="tab" data-tab="+" data-group="gear">
                    click the '+' to add tabs
                </div>
            </section>
        </div>
        <div class="tab skills" data-group="primary" data-tab="skills">
            <div class="skills-top">
                <table class="itemTable">
                    <tr>
                        <th colspan="7">Non-Weapon Proficiencies</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Stat</th>
                        <th>Base</th>
                        <th>Adjust</th>
                        <th>Total</th>
                        <th></th>
                    </tr>
                    <tbody class="itemTable-sort">
                        {{#each data.system.proficiencies.nonweapon}}
                        <tr class="item" data-item-id={{this.id}} data-locked="{{this.system.locked}}">
                            <td>
                                <a
                                    class="itemTable-handle"
                                    data-locked="{{this.system.locked}}"
                                >
                                    <i class="fas fa-bars"></i>
                                </a>
                            </td>
                            <td>
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.name"
                                    name="{{this.id}}.name"
                                    value="{{this.name}}"
                                    data-target="name"
                                    data-name=true
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <select
                                    class="item-edit"
                                    data-target="system.stat"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                                    {{selectOptions @root.data.system.statChoices selected=this.system.stat}}
                                </select>
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    id="{{this.id}}.base"
                                    name="{{this.id}}.base"
                                    value="{{this.system.base}}"
                                    data-target="system.base"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    id="{{this.id}}.adjust"
                                    name="{{this.id}}.adjust"
                                    value="{{this.system.adjust}}"
                                    data-target="system.adjust"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <span
                                    class="rollable skills-rollSpan"
                                    data-roll="d20cs>=(20-{{this.system.total}})"
                                    data-label="{{this.name}} Check"
                                >
                                    {{this.system.total}}
                                </span>
                            </td>
                            <td>
                                <a
                                    class="item-delete"
                                    title="Delete Item"
                                    data-locked={{this.system.locked}}
                                >
                                    <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                </a>
                                <a
                                    class="item-toggle"
                                    title="Lock Item"
                                    data-value={{this.system.locked}}
                                    data-target="system.locked"
                                >
                                    <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                </a>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="nonWeaponProficiency"><i class="fas fa-plus"></i> Add non-weapon proficiency</a>
                </div>
            </div>
            <div class="skills-mid">
                <table class="itemTable">
                    <tr>
                        <th colspan="4">Weapon Proficiencies</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th>Name</th>
                        <th>Slots</th>
                        <th></th>
                    </tr>
                    <tbody class="itemTable-sort">
                        {{#each data.system.proficiencies.weapon}}
                        <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                            <td>
                                <a
                                    class="itemTable-handle"
                                    data-locked="{{this.system.locked}}"
                                >
                                    <i class="fas fa-bars"></i>
                                </a>
                            </td>
                            <td>
                                <input
                                    type="text"
                                    class="itemTable-inputText item-edit"
                                    id="{{this.id}}.name"
                                    name="{{this.id}}.name"
                                    value="{{this.name}}"
                                    data-target="name"
                                    data-name=true
                                    {{#if this.system.locked}}disabled{{/if}}
                                />
                            </td>
                            <td>
                                <input
                                    type="number"
                                    class="itemTable-inputNum item-edit"
                                    name="{{this.id}}.base"
                                    value="{{this.system.base}}"
                                    data-target="system.base"
                                    {{#if this.system.locked}}disabled{{/if}}
                                >
                            </td>
                            <td>
                                <a
                                    class="item-delete"
                                    title="Delete Item"
                                    data-locked={{this.system.locked}}
                                >
                                    <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                </a>
                                <a
                                    class="item-toggle"
                                    title="Lock Item"
                                    data-value={{this.system.locked}}
                                    data-target="system.locked"
                                >
                                    <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                </a>
                            </td>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
                <div class="itemTable-buttons">
                    <a class="item-create" data-type="weaponProficiency"><i class="fas fa-plus"></i> Add weapon proficiency</a>
                </div>
            </div>
        </div>
        <div class="tab spells" data-group="primary" data-tab="spells">
            <div class="spells-tables">
                {{#each data.system.spellTabs}}
                <div class="spells-{{this.level}}">
                    <table class="itemTable">
                        <tr>
                            <th colspan="5">{{this.level}}{{this.suffix}} level spells</th>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Casts</th>
                            <th colspan="3">
                                Spell Slots
                                <input
                                    type="number"
                                    class="itemTable-inputNum"
                                    value="{{this.slots}}"
                                    name="system.spellTabs.{{@key}}.slots"
                                >
                            </th>
                        </tr>
                        <tbody class="itemTable-sort">
                            {{#each this.spells}}
                            <tr class="item" data-item-id="{{this.id}}" data-locked="{{this.system.locked}}">
                                <td>
                                    <a
                                        class="itemTable-handle"
                                        data-locked="{{this.system.locked}}"
                                    >
                                        <i class="fas fa-bars"></i>
                                    </a>
                                </td>
                                <td>
                                    <input
                                        type="number"
                                        class="itemTable-inputNum item-edit"
                                        name="{{this.id}}.casts"
                                        value="{{this.system.casts}}"
                                        data-target="system.casts"
                                        {{#if this.system.locked}}disabled{{/if}}
                                    >
                                </td>
                                <td>
                                    <input
                                        type="text"
                                        class="itemTable-inputText item-edit"
                                        id="{{this.id}}.name"
                                        name="{{this.id}}.name"
                                        value="{{this.name}}"
                                        data-target="name"
                                        data-name=true
                                        {{#if this.system.locked}}disabled{{/if}}
                                    />
                                </td>
                                <td>
                                    <i title="Verbal" class="spells-component {{#if this.system.verbal}}enabled{{/if}}">V</i>
                                    <i title="Somatic" class="spells-component {{#if this.system.somatic}}enabled{{/if}}">S</i>
                                    <i title="Material" class="spells-component {{#if this.system.material}}enabled{{/if}}">M</i>
                                </td>
                                <td>
                                    <a
                                        class="item-delete"
                                        title="Delete Item"
                                        data-locked={{this.system.locked}}
                                    >
                                        <i class="fas fa-trash {{#if this.system.locked}} disabled-color {{/if}}"></i>
                                    </a>
                                    <a
                                        class="item-toggle"
                                        title="Lock Item"
                                        data-value={{this.system.locked}}
                                        data-target="system.locked"
                                    >
                                        <i class="fas {{#if this.system.locked}} fa-lock {{else}} fa-lock-open {{/if}}"></i>
                                    </a>
                                    <a
                                        class="item-open"
                                        title="View Item Notes"
                                        data-locked="{{this.system.locked}}"
                                    >
                                        <i class="fas fa-book"></i>
                                    </a>
                                </td>
                            </tr>
                            {{/each}}
                        </tbody>
                    </table>
                    <div class="itemTable-buttons">
                        <a class="item-create" data-type="spell" data-level="{{this.level}}"><i class="fas fa-plus"></i> Add {{this.level}}{{this.suffix}} level spell</a>
                    </div>
                </div>
                {{/each}}
            </div>
        </div>
        <div class="tab settings settings-list" data-group="primary" data-tab="settings">
            <h2 class="module-header">Character Sheet Settings</h2>
            <div class="form-group">
                <label>Show Basic Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="system.settings.sheetToggle.basic"
                        {{checked data.system.settings.sheetToggle.basic}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Combat Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="system.settings.sheetToggle.combat"
                        {{checked data.system.settings.sheetToggle.combat}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Gear Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="system.settings.sheetToggle.gear"
                        {{checked data.system.settings.sheetToggle.gear}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Skills Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="system.settings.sheetToggle.skills"
                        {{checked data.system.settings.sheetToggle.skills}}
                    >
                </div>
            </div>
            <div class="form-group">
                <label>Show Spells Tab</label>
                <div class="form-fields">
                    <input
                        type="checkbox"
                        name="system.settings.sheetToggle.spells"
                        {{checked data.system.settings.sheetToggle.spells}}
                    >
                </div>
            </div>
        </div>
    </section>
</form>
